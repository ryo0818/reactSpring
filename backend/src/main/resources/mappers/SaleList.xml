<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.repository.SaleRepository">
	<!-- DTOへのマッピング -->
	<resultMap id="SalesEntity" type="com.example.demo.entity.SalesEntity">
		<result column="id" property="id" />
		<result column="mycompanycode" property="mycompanycode" />
		<result column="industry" property="industry" />
		<result column="company_name" property="companyName" />
		<result column="phone_number" property="phoneNumber" />
		<result column="call_date" property="callDate" />
		<result column="call_count" property="callCount" />
		<result column="status" property="status" />
		<result column="staff" property="staff" />
		<result column="remarks" property="remarks" />
		<result column="url" property="url" />
		<result column="address" property="address" />
		<result column="hot_flg" property="hotFlg" />
	</resultMap>

	<!-- IDの最大値を取得 -->
	<select id="getMaxId"
		resultType="string">
		SELECT
		MAX(CAST(id AS integer))
		FROM salelist
	</select>


	<!-- 全件取得 -->
	<select id="getSalesSearch"
		parameterType="com.example.demo.entity.SalesEntity"
		resultMap="SalesEntity">
		SELECT
		id,
		mycompanycode,
		industry,
		companyName,
		phoneNumber,
		callDate,
		callCount,
		status,
		staff,
		remarks,
		url,
		address,
		hotFlg
		FROM saleList
		WHERE mycompanycode = #{mycompanycode}
		ORDER BY callDate DESC, id ASC
	</select>

	<!-- 登録処理 -->
	<insert id="insertSalse" parameterType="com.example.demo.entity.SalesEntity">
		INSERT INTO saleList (
		id,
		mycompanycode,
		industry,
		companyName,
		phoneNumber,
		callDate,
		callCount,
		status,
		staff,
		remarks,
		url,
		address,
		hotFlg
		)
		VALUES (
		#{id},
		#{mycompanycode},
		#{industry},
		#{companyName},
		#{phoneNumber},
		#{callDate},
		#{callCount},
		#{status},
		#{staff},
		#{remarks},
		#{url},
		#{address},
		#{hotFlg}
		)
	</insert>

</mapper>